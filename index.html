<script>
    var videoPlayer = document.getElementById("videoPlayer");
    var playlistUrl = "playlist.json";
    var videoUrls = [];
    var currentVideoIndex = 0;

    // Load playlist
    fetch(playlistUrl)
        .then(response => response.json())
        .then(data => {
            videoUrls = data;
            createSchedule();
            setInitialVideo();
            playScheduledVideo();
        })
        .catch(error => console.error('Error loading playlist:', error));

    // Create schedule with 288 slots for each day
    function createSchedule() {
        var totalVideos = videoUrls.length;
        var slotsPerDay = 288; // 24 hours * 60 minutes / 5 minutes per slot

        // Fill 288 slots
        videoUrls = [];
        for (var i = 0; i < slotsPerDay; i++) {
            var videoIndex = i % totalVideos;
            videoUrls.push(videoIndex);
        }
    }

    // Set the initial video to play
    function setInitialVideo() {
        // For simplicity, always start from the first video
        currentVideoIndex = 0;
    }

    // Play the scheduled video
    function playScheduledVideo() {
        videoPlayer.src = videoUrls[currentVideoIndex];
        videoPlayer.play();
        console.log('Current video index:', currentVideoIndex);
        console.log('Current video URL:', videoUrls[currentVideoIndex]);
    }

    // Play the next video when the current one ends
    videoPlayer.addEventListener("ended", function () {
        currentVideoIndex = (currentVideoIndex + 1) % videoUrls.length;
        videoPlayer.src = videoUrls[currentVideoIndex];
        videoPlayer.play();
    });

    // Error handling for video playback
    videoPlayer.addEventListener('error', function (e) {
        console.error('Error during video playback:', e);
    });
</script>
